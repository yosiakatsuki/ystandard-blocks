[data-type="ystdb/columns"] {
  .ystdb-columns {
    margin: 0;

    & > .editor-inner-blocks > .editor-block-list__layout {
      display: flex;
      flex-wrap: wrap;
      margin-right: -.5rem;
      margin-left: -.5rem;

      [data-type="ystdb/column"] {
        margin-right: .5rem;
        margin-left: .5rem;

        .ystdb-column {
          margin-right: 0;
          margin-left: 0;
        }
      }

      .block-list-appender {
        flex: 0 0 calc(100% - 28px);
        max-width: calc(100% - 28px);
      }
    }

    @for $i from 1 through 6 {
      &.has-#{$i}-columns {
        & > .editor-inner-blocks > .editor-block-list__layout > [data-type="ystdb/column"] {
          flex: 0 0 calc(#{(100% / $i)} - 1rem);
          max-width: calc(#{(100% / $i)} - 1rem);
        }
      }
    }
    @for $i from 1 through 6 {
      @include media-breakpoint(md) {
        &.has-#{$i}-columns--tablet {
          & > .editor-inner-blocks > .editor-block-list__layout > [data-type="ystdb/column"] {
            flex: 0 0 calc(#{(100% / $i)} - 1rem);
            max-width: calc(#{(100% / $i)} - 1rem);
          }
        }
      }
    }
    @for $i from 1 through 6 {
      @include media-breakpoint(lg) {
        &.has-#{$i}-columns--pc {
          & > .editor-inner-blocks > .editor-block-list__layout > [data-type="ystdb/column"] {
            flex: 0 0 calc(#{(100% / $i)} - 1rem);
            max-width: calc(#{(100% / $i)} - 1rem);
          }
        }
      }
    }

    &.is-vertically-aligned-center {
      .ystdb-column-block-container {
        & > .editor-inner-blocks > .editor-block-list__layout {
          justify-content: center;
        }
      }
    }

    &.is-vertically-aligned-bottom {
      .ystdb-column-block-container {
        & > .editor-inner-blocks > .editor-block-list__layout {
          justify-content: flex-end;
        }
      }
    }

    &.is-vertically-aligned-last {
      .ystdb-column-block-container {
        & > .editor-inner-blocks > .editor-block-list__layout {
          & > *:nth-last-child(3) {
            flex-grow: 1;
          }
        }
      }
    }

  }
}

[data-type="ystdb/column"] {
  margin-bottom: 1rem;

  & > .editor-block-list__block-edit {
    height: calc(100% - 28px);

    & > [data-block] {
      height: 100%;
    }

    & > div:last-child {
    }
  }

  .ystdb-column {
    height: 100%;

    .ystdb-column-block-container {
      height: 100%;

      & > .editor-inner-blocks {
        height: 100%;

        & > .editor-block-list__layout {
          display: flex;
          flex-direction: column;
          height: 100%;

          & > *:not(.block-list-appender) {
            width: 100%;
          }
        }
      }
    }

    &.has-shadow,
    &.has-background {
      padding: 1rem;
    }

    &.has-shadow {
      box-shadow: 0 3px 15px rgba(189, 195, 199, .7);
    }

    .editor-inner-blocks > .editor-block-list__layout {
      .wp-block:first-child [data-block] {
        margin-top: 0;
      }

      .wp-block:not(:nth-last-child(2)) [data-block] {
        margin-bottom: 0;
      }

      .block-list-appender {
        flex: 0 0 auto;
        max-width: unset;
      }
    }
  }
}
