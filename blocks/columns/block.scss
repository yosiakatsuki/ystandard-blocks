@use "../../src/sass/global";
@use "sass:math";
@use "mixin";
@use "deprecated/deprecated_3-4/deprecated_3-4";

$editor: false !default;

/**
 * Columns Wrap
 */
.ystdb-columns-wrap {

	+ .ystdb-columns-wrap {
		margin-top: 0;
	}
}

/**
 * Columns
 */
.ystdb-columns {
	--ystdb-column-row-gap: 2rem;
	--ystdb-column-column-gap: 2rem;
	display: flex;
	flex-wrap: wrap;
	gap: var(--ystdb-column-row-gap) var(--ystdb-column-column-gap);

	@include mixin.column();

	&[style*="--ystdb-gap-desktop"] {

		@include global.media-breakpoint-only-pc($editor) {
			--ystdb-column-row-gap: var(--ystdb-gap-desktop);
			--ystdb-column-column-gap: var(--ystdb-gap-desktop);
		}
	}

	&[style*="--ystdb-row-gap-desktop"] {

		@include global.media-breakpoint-only-pc($editor) {
			--ystdb-column-row-gap: var(--ystdb-row-gap-desktop);
		}
	}

	&[style*="--ystdb-column-gap-desktop"] {

		@include global.media-breakpoint-only-pc($editor) {
			--ystdb-column-column-gap: var(--ystdb-column-gap-desktop);
		}
	}

	&[style*="--ystdb-gap-tablet"] {

		@include global.media-breakpoint-only-tablet($editor) {
			--ystdb-column-row-gap: var(--ystdb-gap-tablet);
			--ystdb-column-column-gap: var(--ystdb-gap-tablet);
		}
	}

	&[style*="--ystdb-row-gap-tablet"] {

		@include global.media-breakpoint-only-tablet($editor) {
			--ystdb-column-row-gap: var(--ystdb-row-gap-tablet);
		}
	}

	&[style*="--ystdb-column-gap-tablet"] {

		@include global.media-breakpoint-only-tablet($editor) {
			--ystdb-column-gap: var(--ystdb-column-gap-tablet);
		}
	}

	&[style*="--ystdb-gap-mobile"] {

		@include global.media-breakpoint-only-mobile($editor) {
			--ystdb-column-row-gap: var(--ystdb-gap-mobile);
			--ystdb-column-column-gap: var(--ystdb-gap-mobile);
		}
	}

	&[style*="--ystdb-row-gap-mobile"] {

		@include global.media-breakpoint-only-mobile($editor) {
			--ystdb-column-row-gap: var(--ystdb-row-gap-mobile);
		}
	}

	&[style*="--ystdb-column-gap-mobile"] {

		@include global.media-breakpoint-only-mobile($editor) {
			--ystdb-column-column-gap: var(--ystdb-column-gap-mobile);
		}
	}

	&.is-reverse {
		flex-direction: row-reverse;
	}

	&.is-vertically-aligned-top {

		> .ystdb-column > .ystdb-column-block-container {
			justify-content: flex-start;
		}
	}

	&.is-vertically-aligned-center {

		> .ystdb-column > .ystdb-column-block-container {
			justify-content: center;
		}
	}

	&.is-vertically-aligned-bottom {

		> .ystdb-column > .ystdb-column-block-container {
			justify-content: flex-end;
		}
	}

	&.is-vertically-aligned-last {

		> .ystdb-column > .ystdb-column-block-container {

			> *:nth-last-child(2) {
				margin-bottom: auto;
			}
		}
	}


	&.is-horizontally-aligned-center {
		justify-content: center;
	}

	&.is-horizontally-aligned-right {
		justify-content: flex-end;
	}

	&.is-horizontally-aligned-between {
		justify-content: space-between;
	}
}


/**
 * Column
 */

.ystdb-column-block-container {
	display: flex;
	flex-direction: column;
	width: 100%;
	height: 100%;

	> * {
		margin-top: 1em;
		margin-bottom: 0;

		&:first-child {
			margin-top: 0;
		}
	}

	p:empty {
		display: none;
	}
}

.ystdb-column {
	margin: 0;
	min-width: 0;

	&.has-shadow {
		box-shadow: 0 3px 15px rgba(189, 195, 199, 0.7);
	}

	&.is-padding-large {
		padding: 1.5rem;

		/* 幅広画像の特別処理 */
		.wp-block-image.alignwide {
			margin-right: -1.5rem;
			margin-left: -1.5rem;
			padding-right: 0;
			padding-left: 0;

			&:first-child {
				margin-top: -1.5rem;
			}
		}
	}

	&.is-padding-small {
		padding: 1rem;

		/* 幅広画像の特別処理 */
		.wp-block-image.alignwide {
			margin-right: -1rem;
			margin-left: -1rem;
			padding-right: 0;
			padding-left: 0;

			&:first-child {
				margin-top: -1rem;
			}
		}
	}
}
