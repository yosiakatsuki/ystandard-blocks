@use "../../src/sass/global";
@use "mixin";
@use "sass:math";
@use "block";
@use "item/deprecated/edit" as column-deprecated;

/**
 * Columns
 */
.ystdb-columns {
	margin-top: 0;

	> .block-list-appender {
		position: relative;
	}

	> .ystdb-column {
		margin-right: 0;
		margin-left: 0;
	}
}


/**
 * Column.
 */
.ystdb-column {

	&.is-padding-large {

		/* 幅広画像の特別処理 5.8+ */
		.wp-block[data-align="wide"] {

			.wp-block-image {
				margin-right: -1.5rem;
				margin-left: -1.5rem;
			}

			&:first-child {

				.wp-block-image {
					margin-top: -1.5rem;
				}
			}
		}

		/* 幅広画像の特別処理 5.7- */
		[data-type="core/image"][data-align="wide"] {

			[data-block] {
				margin-right: -1.5rem;
				margin-left: -1.5rem;
			}

			&:first-child {

				.wp-block-image {
					margin-top: -1.5rem;
				}
			}
		}
	}

	&.is-padding-small {

		/* 幅広画像の特別処理 5.8+ */
		.wp-block[data-align="wide"] {

			.wp-block-image {
				margin-right: -1rem;
				margin-left: -1rem;
			}

			&:first-child {

				.wp-block-image {
					margin-top: -1rem;
				}
			}
		}

		/* 幅広画像の特別処理 5.7- */
		[data-type="core/image"][data-align="wide"] {

			[data-block] {
				margin-right: -1rem;
				margin-left: -1rem;
			}

			&:first-child {

				.wp-block-image {
					margin-top: -1rem;
				}
			}
		}
	}


	.ystdb-column-block-container {

		> * {
			margin: 16px 0 0;

			&:first-child {
				margin-top: 0;
			}

			&:not(:nth-last-child(2)) {
				margin-bottom: 0;
			}
		}

		p:empty {
			display: block;
		}

		> .block-list-appender {

			&:only-child {
				display: block !important;
				width: 100%;

				.block-editor-button-block-appender {
					width: 100%;
				}
			}
		}
	}

	&.is-selected,
	&.has-child-selected {

		.ystdb-column-block-container {

			> .block-list-appender {
				position: relative;

				&:not(:only-child) {
					margin-top: 14px !important;

					.block-editor-inserter {
						display: inline-block;
					}

					.block-editor-button-block-appender {
						padding: 0;
						background: #1e1e1e;
						color: #fff;
					}
				}
			}
		}
	}

	&:not(.is-selected):not(.has-child-selected) {

		.ystdb-column-block-container {

			> .block-list-appender {
				display: none;
			}
		}
	}

	&[class*="is-auto-width"] + .block-list-appender {
		width: 100%;
		flex-basis: 100%;
	}
}

